{"version":3,"file":"asserts.cjs","sources":["../../../../src/plugins/candyMachineModule/asserts.ts"],"sourcesContent":["import { CandyMachine, CandyMachineItem } from './models';\nimport {\n  CandyMachineItemTextTooLongError,\n  CandyMachineCannotAddAmountError,\n  CandyMachineIsFullError,\n} from './errors';\n\nexport const assertNotFull = (\n  candyMachine: Pick<CandyMachine, 'itemsAvailable' | 'itemsLoaded'>,\n  index: number\n) => {\n  if (candyMachine.itemsAvailable.lten(candyMachine.itemsLoaded)) {\n    throw new CandyMachineIsFullError(\n      index,\n      candyMachine.itemsAvailable.toNumber()\n    );\n  }\n};\n\nexport const assertCanAdd = (\n  candyMachine: Pick<CandyMachine, 'itemsAvailable'>,\n  index: number,\n  amount: number\n) => {\n  if (index + amount > candyMachine.itemsAvailable.toNumber()) {\n    throw new CandyMachineCannotAddAmountError(\n      index,\n      amount,\n      candyMachine.itemsAvailable.toNumber()\n    );\n  }\n};\n\nexport const assertAllItemConstraints = (\n  candyMachine: Pick<CandyMachine, 'itemSettings'>,\n  items: Pick<CandyMachineItem, 'name' | 'uri'>[]\n) => {\n  if (candyMachine.itemSettings.type !== 'configLines') {\n    return;\n  }\n\n  const { nameLength } = candyMachine.itemSettings;\n  const { uriLength } = candyMachine.itemSettings;\n\n  for (let i = 0; i < items.length; i++) {\n    if (items[i].name.length > nameLength) {\n      throw new CandyMachineItemTextTooLongError(\n        i,\n        'name',\n        items[i].name,\n        nameLength\n      );\n    }\n    if (items[i].uri.length > uriLength) {\n      throw new CandyMachineItemTextTooLongError(\n        i,\n        'uri',\n        items[i].uri,\n        uriLength\n      );\n    }\n  }\n};\n"],"names":["assertNotFull","candyMachine","index","itemsAvailable","lten","itemsLoaded","CandyMachineIsFullError","toNumber","assertCanAdd","amount","CandyMachineCannotAddAmountError","assertAllItemConstraints","items","itemSettings","type","nameLength","uriLength","i","length","name","CandyMachineItemTextTooLongError","uri"],"mappings":";;;;;;MAOaA,aAAa,GAAG,CAC3BC,YAAkE,EAClEC,KAAa,KACV;EACH,IAAID,YAAY,CAACE,cAAc,CAACC,IAAI,CAACH,YAAY,CAACI,WAAW,CAAC,EAAE;IAC9D,MAAM,IAAIC,8BAAuB,CAC/BJ,KAAK,EACLD,YAAY,CAACE,cAAc,CAACI,QAAQ,EAAE,CACvC,CAAA;AACH,GAAA;AACF,EAAC;AAEM,MAAMC,YAAY,GAAG,CAC1BP,YAAkD,EAClDC,KAAa,EACbO,MAAc,KACX;EACH,IAAIP,KAAK,GAAGO,MAAM,GAAGR,YAAY,CAACE,cAAc,CAACI,QAAQ,EAAE,EAAE;AAC3D,IAAA,MAAM,IAAIG,uCAAgC,CACxCR,KAAK,EACLO,MAAM,EACNR,YAAY,CAACE,cAAc,CAACI,QAAQ,EAAE,CACvC,CAAA;AACH,GAAA;AACF,EAAC;MAEYI,wBAAwB,GAAG,CACtCV,YAAgD,EAChDW,KAA+C,KAC5C;AACH,EAAA,IAAIX,YAAY,CAACY,YAAY,CAACC,IAAI,KAAK,aAAa,EAAE;AACpD,IAAA,OAAA;AACF,GAAA;EAEA,MAAM;AAAEC,IAAAA,UAAAA;GAAY,GAAGd,YAAY,CAACY,YAAY,CAAA;EAChD,MAAM;AAAEG,IAAAA,SAAAA;GAAW,GAAGf,YAAY,CAACY,YAAY,CAAA;AAE/C,EAAA,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,KAAK,CAACM,MAAM,EAAED,CAAC,EAAE,EAAE;IACrC,IAAIL,KAAK,CAACK,CAAC,CAAC,CAACE,IAAI,CAACD,MAAM,GAAGH,UAAU,EAAE;AACrC,MAAA,MAAM,IAAIK,uCAAgC,CACxCH,CAAC,EACD,MAAM,EACNL,KAAK,CAACK,CAAC,CAAC,CAACE,IAAI,EACbJ,UAAU,CACX,CAAA;AACH,KAAA;IACA,IAAIH,KAAK,CAACK,CAAC,CAAC,CAACI,GAAG,CAACH,MAAM,GAAGF,SAAS,EAAE;AACnC,MAAA,MAAM,IAAII,uCAAgC,CACxCH,CAAC,EACD,KAAK,EACLL,KAAK,CAACK,CAAC,CAAC,CAACI,GAAG,EACZL,SAAS,CACV,CAAA;AACH,KAAA;AACF,GAAA;AACF;;;;;;"}