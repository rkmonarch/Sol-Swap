{"version":3,"file":"plugin.mjs","sources":["../../../../src/plugins/nftModule/plugin.ts"],"sourcesContent":["import { cusper, PROGRAM_ID } from '@metaplex-foundation/mpl-token-metadata';\nimport { ProgramClient } from '../programModule';\nimport { NftClient } from './NftClient';\nimport {\n  approveNftCollectionAuthorityOperation,\n  approveNftCollectionAuthorityOperationHandler,\n  approveNftUseAuthorityOperation,\n  approveNftUseAuthorityOperationHandler,\n  createNftOperation,\n  createNftOperationHandler,\n  createSftOperation,\n  createSftOperationHandler,\n  deleteNftOperation,\n  deleteNftOperationHandler,\n  findNftByMetadataOperation,\n  findNftByMetadataOperationHandler,\n  findNftByMintOperation,\n  findNftByMintOperationHandler,\n  findNftByTokenOperation,\n  findNftByTokenOperationHandler,\n  findNftsByCreatorOperation,\n  findNftsByCreatorOperationHandler,\n  findNftsByMintListOperation,\n  findNftsByMintListOperationHandler,\n  findNftsByOwnerOperation,\n  findNftsByOwnerOperationHandler,\n  findNftsByUpdateAuthorityOperation,\n  findNftsByUpdateAuthorityOperationHandler,\n  freezeDelegatedNftOperation,\n  freezeDelegatedNftOperationHandler,\n  loadMetadataOperation,\n  loadMetadataOperationHandler,\n  migrateToSizedCollectionNftOperation,\n  migrateToSizedCollectionNftOperationHandler,\n  printNewEditionOperation,\n  printNewEditionOperationHandler,\n  revokeNftCollectionAuthorityOperation,\n  revokeNftCollectionAuthorityOperationHandler,\n  revokeNftUseAuthorityOperation,\n  revokeNftUseAuthorityOperationHandler,\n  thawDelegatedNftOperation,\n  thawDelegatedNftOperationHandler,\n  unverifyNftCollectionOperation,\n  unverifyNftCollectionOperationHandler,\n  unverifyNftCreatorOperation,\n  unverifyNftCreatorOperationHandler,\n  updateNftOperation,\n  updateNftOperationHandler,\n  uploadMetadataOperation,\n  uploadMetadataOperationHandler,\n  useNftOperation,\n  useNftOperationHandler,\n  verifyNftCollectionOperation,\n  verifyNftCollectionOperationHandler,\n  verifyNftCreatorOperation,\n  verifyNftCreatorOperationHandler,\n} from './operations';\nimport { ErrorWithLogs, MetaplexPlugin, Program } from '@/types';\nimport type { Metaplex } from '@/Metaplex';\n\n/** @group Plugins */\nexport const nftModule = (): MetaplexPlugin => ({\n  install(metaplex: Metaplex) {\n    // Token Metadata Program.\n    const tokenMetadataProgram = {\n      name: 'TokenMetadataProgram',\n      address: PROGRAM_ID,\n      errorResolver: (error: ErrorWithLogs) =>\n        cusper.errorFromProgramLogs(error.logs, false),\n    };\n    metaplex.programs().register(tokenMetadataProgram);\n    metaplex.programs().getTokenMetadata = function (\n      this: ProgramClient,\n      programs?: Program[]\n    ) {\n      return this.get(tokenMetadataProgram.name, programs);\n    };\n\n    // Operations.\n    const op = metaplex.operations();\n    op.register(\n      approveNftCollectionAuthorityOperation,\n      approveNftCollectionAuthorityOperationHandler\n    );\n    op.register(\n      approveNftUseAuthorityOperation,\n      approveNftUseAuthorityOperationHandler\n    );\n    op.register(createNftOperation, createNftOperationHandler);\n    op.register(createSftOperation, createSftOperationHandler);\n    op.register(deleteNftOperation, deleteNftOperationHandler);\n    op.register(findNftByMetadataOperation, findNftByMetadataOperationHandler);\n    op.register(findNftByMintOperation, findNftByMintOperationHandler);\n    op.register(findNftByTokenOperation, findNftByTokenOperationHandler);\n    op.register(findNftsByCreatorOperation, findNftsByCreatorOperationHandler);\n    op.register(\n      findNftsByMintListOperation,\n      findNftsByMintListOperationHandler\n    );\n    op.register(findNftsByOwnerOperation, findNftsByOwnerOperationHandler);\n    op.register(\n      findNftsByUpdateAuthorityOperation,\n      findNftsByUpdateAuthorityOperationHandler\n    );\n    op.register(\n      freezeDelegatedNftOperation,\n      freezeDelegatedNftOperationHandler\n    );\n    op.register(loadMetadataOperation, loadMetadataOperationHandler);\n    op.register(\n      migrateToSizedCollectionNftOperation,\n      migrateToSizedCollectionNftOperationHandler\n    );\n    op.register(printNewEditionOperation, printNewEditionOperationHandler);\n    op.register(\n      revokeNftCollectionAuthorityOperation,\n      revokeNftCollectionAuthorityOperationHandler\n    );\n    op.register(\n      revokeNftUseAuthorityOperation,\n      revokeNftUseAuthorityOperationHandler\n    );\n    op.register(thawDelegatedNftOperation, thawDelegatedNftOperationHandler);\n    op.register(\n      unverifyNftCollectionOperation,\n      unverifyNftCollectionOperationHandler\n    );\n    op.register(\n      unverifyNftCreatorOperation,\n      unverifyNftCreatorOperationHandler\n    );\n    op.register(updateNftOperation, updateNftOperationHandler);\n    op.register(uploadMetadataOperation, uploadMetadataOperationHandler);\n    op.register(useNftOperation, useNftOperationHandler);\n    op.register(\n      verifyNftCollectionOperation,\n      verifyNftCollectionOperationHandler\n    );\n    op.register(verifyNftCreatorOperation, verifyNftCreatorOperationHandler);\n\n    metaplex.nfts = function () {\n      return new NftClient(this);\n    };\n  },\n});\n\ndeclare module '../../Metaplex' {\n  interface Metaplex {\n    nfts(): NftClient;\n  }\n}\n\ndeclare module '../programModule/ProgramClient' {\n  interface ProgramClient {\n    getTokenMetadata(programs?: Program[]): Program;\n  }\n}\n"],"names":["nftModule","install","metaplex","tokenMetadataProgram","name","address","PROGRAM_ID","errorResolver","error","cusper","errorFromProgramLogs","logs","programs","register","getTokenMetadata","get","op","operations","approveNftCollectionAuthorityOperation","approveNftCollectionAuthorityOperationHandler","approveNftUseAuthorityOperation","approveNftUseAuthorityOperationHandler","createNftOperation","createNftOperationHandler","createSftOperation","createSftOperationHandler","deleteNftOperation","deleteNftOperationHandler","findNftByMetadataOperation","findNftByMetadataOperationHandler","findNftByMintOperation","findNftByMintOperationHandler","findNftByTokenOperation","findNftByTokenOperationHandler","findNftsByCreatorOperation","findNftsByCreatorOperationHandler","findNftsByMintListOperation","findNftsByMintListOperationHandler","findNftsByOwnerOperation","findNftsByOwnerOperationHandler","findNftsByUpdateAuthorityOperation","findNftsByUpdateAuthorityOperationHandler","freezeDelegatedNftOperation","freezeDelegatedNftOperationHandler","loadMetadataOperation","loadMetadataOperationHandler","migrateToSizedCollectionNftOperation","migrateToSizedCollectionNftOperationHandler","printNewEditionOperation","printNewEditionOperationHandler","revokeNftCollectionAuthorityOperation","revokeNftCollectionAuthorityOperationHandler","revokeNftUseAuthorityOperation","revokeNftUseAuthorityOperationHandler","thawDelegatedNftOperation","thawDelegatedNftOperationHandler","unverifyNftCollectionOperation","unverifyNftCollectionOperationHandler","unverifyNftCreatorOperation","unverifyNftCreatorOperationHandler","updateNftOperation","updateNftOperationHandler","uploadMetadataOperation","uploadMetadataOperationHandler","useNftOperation","useNftOperationHandler","verifyNftCollectionOperation","verifyNftCollectionOperationHandler","verifyNftCreatorOperation","verifyNftCreatorOperationHandler","nfts","NftClient"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACO,MAAMA,SAAS,GAAG,OAAuB;EAC9CC,OAAO,CAACC,QAAkB,EAAE;AAC1B;AACA,IAAA,MAAMC,oBAAoB,GAAG;AAC3BC,MAAAA,IAAI,EAAE,sBAAsB;AAC5BC,MAAAA,OAAO,EAAEC,UAAU;MACnBC,aAAa,EAAGC,KAAoB,IAClCC,MAAM,CAACC,oBAAoB,CAACF,KAAK,CAACG,IAAI,EAAE,KAAK,CAAA;KAChD,CAAA;AACDT,IAAAA,QAAQ,CAACU,QAAQ,EAAE,CAACC,QAAQ,CAACV,oBAAoB,CAAC,CAAA;IAClDD,QAAQ,CAACU,QAAQ,EAAE,CAACE,gBAAgB,GAAG,UAErCF,QAAoB,EACpB;MACA,OAAO,IAAI,CAACG,GAAG,CAACZ,oBAAoB,CAACC,IAAI,EAAEQ,QAAQ,CAAC,CAAA;KACrD,CAAA;;AAED;AACA,IAAA,MAAMI,EAAE,GAAGd,QAAQ,CAACe,UAAU,EAAE,CAAA;AAChCD,IAAAA,EAAE,CAACH,QAAQ,CACTK,sCAAsC,EACtCC,6CAA6C,CAC9C,CAAA;AACDH,IAAAA,EAAE,CAACH,QAAQ,CACTO,+BAA+B,EAC/BC,sCAAsC,CACvC,CAAA;AACDL,IAAAA,EAAE,CAACH,QAAQ,CAACS,kBAAkB,EAAEC,yBAAyB,CAAC,CAAA;AAC1DP,IAAAA,EAAE,CAACH,QAAQ,CAACW,kBAAkB,EAAEC,yBAAyB,CAAC,CAAA;AAC1DT,IAAAA,EAAE,CAACH,QAAQ,CAACa,kBAAkB,EAAEC,yBAAyB,CAAC,CAAA;AAC1DX,IAAAA,EAAE,CAACH,QAAQ,CAACe,0BAA0B,EAAEC,iCAAiC,CAAC,CAAA;AAC1Eb,IAAAA,EAAE,CAACH,QAAQ,CAACiB,sBAAsB,EAAEC,6BAA6B,CAAC,CAAA;AAClEf,IAAAA,EAAE,CAACH,QAAQ,CAACmB,uBAAuB,EAAEC,8BAA8B,CAAC,CAAA;AACpEjB,IAAAA,EAAE,CAACH,QAAQ,CAACqB,0BAA0B,EAAEC,iCAAiC,CAAC,CAAA;AAC1EnB,IAAAA,EAAE,CAACH,QAAQ,CACTuB,2BAA2B,EAC3BC,kCAAkC,CACnC,CAAA;AACDrB,IAAAA,EAAE,CAACH,QAAQ,CAACyB,wBAAwB,EAAEC,+BAA+B,CAAC,CAAA;AACtEvB,IAAAA,EAAE,CAACH,QAAQ,CACT2B,kCAAkC,EAClCC,yCAAyC,CAC1C,CAAA;AACDzB,IAAAA,EAAE,CAACH,QAAQ,CACT6B,2BAA2B,EAC3BC,kCAAkC,CACnC,CAAA;AACD3B,IAAAA,EAAE,CAACH,QAAQ,CAAC+B,qBAAqB,EAAEC,4BAA4B,CAAC,CAAA;AAChE7B,IAAAA,EAAE,CAACH,QAAQ,CACTiC,oCAAoC,EACpCC,2CAA2C,CAC5C,CAAA;AACD/B,IAAAA,EAAE,CAACH,QAAQ,CAACmC,wBAAwB,EAAEC,+BAA+B,CAAC,CAAA;AACtEjC,IAAAA,EAAE,CAACH,QAAQ,CACTqC,qCAAqC,EACrCC,4CAA4C,CAC7C,CAAA;AACDnC,IAAAA,EAAE,CAACH,QAAQ,CACTuC,8BAA8B,EAC9BC,qCAAqC,CACtC,CAAA;AACDrC,IAAAA,EAAE,CAACH,QAAQ,CAACyC,yBAAyB,EAAEC,gCAAgC,CAAC,CAAA;AACxEvC,IAAAA,EAAE,CAACH,QAAQ,CACT2C,8BAA8B,EAC9BC,qCAAqC,CACtC,CAAA;AACDzC,IAAAA,EAAE,CAACH,QAAQ,CACT6C,2BAA2B,EAC3BC,kCAAkC,CACnC,CAAA;AACD3C,IAAAA,EAAE,CAACH,QAAQ,CAAC+C,kBAAkB,EAAEC,yBAAyB,CAAC,CAAA;AAC1D7C,IAAAA,EAAE,CAACH,QAAQ,CAACiD,uBAAuB,EAAEC,8BAA8B,CAAC,CAAA;AACpE/C,IAAAA,EAAE,CAACH,QAAQ,CAACmD,eAAe,EAAEC,sBAAsB,CAAC,CAAA;AACpDjD,IAAAA,EAAE,CAACH,QAAQ,CACTqD,4BAA4B,EAC5BC,mCAAmC,CACpC,CAAA;AACDnD,IAAAA,EAAE,CAACH,QAAQ,CAACuD,yBAAyB,EAAEC,gCAAgC,CAAC,CAAA;IAExEnE,QAAQ,CAACoE,IAAI,GAAG,YAAY;AAC1B,MAAA,OAAO,IAAIC,SAAS,CAAC,IAAI,CAAC,CAAA;KAC3B,CAAA;AACH,GAAA;AACF,CAAC;;;;"}